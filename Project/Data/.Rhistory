allow_unbalanced_panel = TRUE)
base_c_est <- aggte(base_c, type = "group", na.rm = TRUE,
#min_e = -5, max_e = 10
)
ggdid(base_c_est)
############ base specification, with controls ######################
base_c <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ AGE + `ANNUAL HOURS WORKED` + `LABOR INCOME`,
data = res_clean_wife,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
#clustervars = c("State"),
allow_unbalanced_panel = TRUE)
base_c_est <- aggte(base_c, type = "group", na.rm = TRUE,
#min_e = -5, max_e = 10
)
ggdid(base_c_est)
?aggte
base_c_est <- aggte(base_c, type = "calendar", na.rm = TRUE,
#min_e = -5, max_e = 10
)
base_c_est <- aggte(base_c, type = "simple", na.rm = TRUE,
#min_e = -5, max_e = 10
)
ggdid(base_c_est)
base_c_est
base_c_est$overall.att
base_c_est$se.egt
base_c_est$overall.se
library(data.table)
library(ggplot2)
library(did)
library(fixest)
`%ni%` <- Negate(`%in%`)
setwd("~/Google Drive/Academic Work/Sophomore Year/Spring Quarter/Metrics Data Science/ECMA31320/Project/Data/")
################################################################################
################## DATA LOGISTICS ###################################
################################################################################
#import, sort data and select columns
res_clean_raw <- fread("cleaned_psid.csv")
setorder(res_clean_raw, "household", "person", "Year")
selcols <- c("STATE", "person", "Year", "RELATION TO HEAD", "MARITAL STATUS",
"AGE", "OCCUPATION", "INDUSTRY", "INDIVIDUAL WEIGHT",
"FAMILY NUMBER", "FAMILY WEIGHT", "RENT/OWN STATUS", "RACE",
"ANNUAL HOURS WORKED", "LABOR INCOME", "CHILDREN COUNT",
"YEARS WORKED FULL-TIME SINCE 18", "EDUCATION", "HOUSE VALUE",
"LEISURE HOURS", "HOUSEWORK HOURS", "HAS DISABILITY",
"DISABILITY LIMITING WORK","haschild","wife",
"HOUSEHOLD HOUSEWORK HOURS", "Unilateral Divorce",
"Equitable Distribution", "State")
res_clean <- res_clean_raw[,.SD,.SDcols = selcols]
# only have not yet treated individuals
res_clean[`Unilateral Divorce` != "1992"]
# add family column and prefix to year
res_clean[,family := as.numeric(unlist(lapply(strsplit(person, "_"), function (x) x[1])))]
res_clean[,Year:=1900+Year]
length(unique(res_clean$family))
# filter for wives who are married, and are the main spouse of the family
res_clean_ppl <- res_clean[wife == 1 &
`RELATION TO HEAD` %in% c(2, 20) &
`MARITAL STATUS` == 1 & AGE != -1, person]
res_clean_wife <- res_clean[person %in% res_clean_ppl & AGE != -1]
res_clean_husband <- res_clean[family %in% res_clean_wife$family & wife == 0 &
AGE != -1]
# columns for husband data, adding suffix to make column names different
husbandsel <- c("person", "AGE", "OCCUPATION", "INDUSTRY",
"RACE", "ANNUAL HOURS WORKED", "LABOR INCOME",
"HOUSEWORK HOURS")
newnames <- paste(husbandsel, "husband", sep = "_")
setnames(res_clean_husband, c("person", "AGE", "OCCUPATION", "INDUSTRY",
"RACE", "ANNUAL HOURS WORKED", "LABOR INCOME",
"HOUSEWORK HOURS"),
newnames)
newnames <- c(newnames, "family", "Year",  "FAMILY NUMBER")
# add husband columns to wife table
res_clean_wife <- merge.data.table(res_clean_wife, res_clean_husband[,.SD,.SDcols = newnames],
by = c("family", "Year", "FAMILY NUMBER"))
#drop columns
dropcols <- c("RELATION TO HEAD", "MARITAL STATUS", "wife")
res_clean_wife[, (dropcols) := NULL]
length(unique(res_clean_wife$family))
################################################################################
############ SANT'ANNA CALLAWAY DATA PREP ###########################
################################################################################
# creating column that tells us the treatment yet
res_clean_wife[,`Unilateral Divorce Year` := as.numeric(`Unilateral Divorce`)]
# always treated - must remove from data
res_clean_wife_at <- res_clean_wife
res_clean_wife_at[grepl(1967, `Unilateral Divorce`),
`Unilateral Divorce Year` := 1967]
alwaystreated <- res_clean_wife_at[, all(Year >= `Unilateral Divorce Year`),
by = person][V1 == TRUE, person]
res_clean_wife <- res_clean_wife[person %ni% alwaystreated]
length(unique(res_clean_wife$family))
# never treated - defined as control group
res_clean_wife[`Unilateral Divorce` == "no" |
is.na(`Unilateral Divorce`),`Unilateral Divorce Year` := 0]
# individuals who were in data in all years before treatment was implemented
control_grp <- res_clean_wife[, all(`Unilateral Divorce Year` >= Year),
by = person][V1 == TRUE, person]
res_clean_wife[person %in% control_grp, `Unilateral Divorce Year` := 0]
# add numeric id for individuals
res_clean_wife[, id:=.GRP, by = person]
# ways to split data
# hs education
res_clean_wife[, hasHighSchool := as.numeric(max(`EDUCATION`, na.rm = TRUE)
%in% c(4:8)), by = id]
# worked in year policy passed
ids <- res_clean_wife[`ANNUAL HOURS WORKED` > 0 &
Year == `Unilateral Divorce Year`, id]
res_clean_wife[, worked := id %in% ids]
# had income
ids <- res_clean_wife[`LABOR INCOME` > 0  & Year == `Unilateral Divorce Year`, id]
res_clean_wife[, highearning := id %in% ids]
# working on covariates
res_clean_wife[, STATE := factor(STATE)]
res_clean_wife[, `RENT/OWN STATUS` := factor(`RENT/OWN STATUS`)]
res_clean_wife[, `RACE` := factor(RACE)]
res_clean_wife[, `EDUCATION` := factor(EDUCATION)]
res_clean_wife[, `OCCUPATION` := factor(OCCUPATION)]
res_clean_wife[, `INDUSTRY` := factor(INDUSTRY)]
res_clean_wife[, `State` := factor(State)]
res_clean_wife[,`Equitable Distribution Year` :=
as.numeric(`Equitable Distribution`)]
res_clean_wife[`Equitable Distribution` %in% c('community property','pre-1967'),
`Equitable Distribution Year` := 1967]
res_clean_wife[, `Has Equitable Distribution` :=
Year >= `Equitable Distribution Year`]
# working out outcomes
res_clean_wife[, hw_ratio := `HOUSEWORK HOURS`/`HOUSEHOLD HOUSEWORK HOURS`]
res_clean_wife[, husband_dif := `HOUSEWORK HOURS_husband` - `HOUSEWORK HOURS`]
#remove people who moved
ids <- res_clean_wife[, unique(State), by = id][, .N, by = id][N == 1, id]
res_clean_wife <- res_clean_wife[id %in% ids]
fwrite(res_clean_wife, "final_regression_dataset.csv")
################################################################################
############################ SANT'ANNA CALLAWAY ################################
################################################################################
#res_clean_wife <- res_clean_wife[`Unilateral Divorce` != "no" & `Unilateral Divorce` != "1992"]
# summary(res_clean_wife[`Unilateral Divorce Year` == 0,..cols])
# summary(res_clean_wife[`Unilateral Divorce Year` != 0,..cols])
# keep option if you want to keep never treated
#res_clean_wife <- res_clean_wife[`Unilateral Divorce Year` != 0]
cols <- c("AGE", "RENT/OWN STATUS", "ANNUAL HOURS WORKED", "LABOR INCOME",
"CHILDREN COUNT", "YEARS WORKED FULL-TIME SINCE 18", "EDUCATION",
"HOUSE VALUE", "LEISURE HOURS", "HOUSEWORK HOURS", "HAS DISABILITY",
"DISABILITY LIMITING WORK", "haschild", "HOUSEHOLD HOUSEWORK HOURS",
"Unilateral Divorce", "Equitable Distribution", "State",
"person_husband", "AGE_husband", "ANNUAL HOURS WORKED_husband",
"LABOR INCOME_husband", "HOUSEWORK HOURS_husband","hasHighSchool","worked")
############ base specification, with controls ######################
base_c <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ AGE + `ANNUAL HOURS WORKED` + `LABOR INCOME`,
data = res_clean_wife,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
#clustervars = c("State"),
allow_unbalanced_panel = TRUE)
base_c_est <- aggte(base_c, type = "simple", na.rm = TRUE,
#min_e = -5, max_e = 10
)
base_c_est
############ base specification, with controls ######################
base_c <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ AGE + `ANNUAL HOURS WORKED` + `LABOR INCOME`,
data = res_clean_wife,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
#clustervars = c("State"),
allow_unbalanced_panel = TRUE,
anticipation = 3)
base_c_est <- aggte(base_c, type = "simple", na.rm = TRUE,
#min_e = -5, max_e = 10
)
base_c_est
base_c_est <- aggte(base_c, type = "dynamic", na.rm = TRUE,
min_e = -5, max_e = 10)
ggdid(base_c_est)  +
annotate("text", x = 9, y = 500,
label = paste("ATT:", round(base_c_est$overall.att, 3))) +
annotate("text", x = 9, y = 450,
label = paste("SE: ", round(base_c_est$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
ggdid(base_c_est)  +
annotate("text", x = 9, y = 500,
label = paste("ATT:", round(base_c_est$overall.att, 3))) +
annotate("text", x = 9, y = 400,
label = paste("SE: ", round(base_c_est$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
############ base specification, with controls ######################
base_c <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ AGE + `ANNUAL HOURS WORKED` + `LABOR INCOME`,
data = res_clean_wife,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
clustervars = c("State"),
allow_unbalanced_panel = TRUE,
anticipation = 3)
base_c_est <- aggte(base_c, type = "dynamic", na.rm = TRUE,
min_e = -5, max_e = 10)
ggdid(base_c_est)  +
annotate("text", x = 9, y = 500,
label = paste("ATT:", round(base_c_est$overall.att, 3))) +
annotate("text", x = 9, y = 400,
label = paste("SE: ", round(base_c_est$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
ggdid(base_c_est)  +
annotate("text", x = 9, y = 1300,
label = paste("ATT:", round(base_c_est$overall.att, 3))) +
annotate("text", x = 9, y = 1200,
label = paste("SE: ", round(base_c_est$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
ggdid(base_c_est)  +
annotate("text", x = 9, y = 1300,
label = paste("ATT:", round(base_c_est$overall.att, 3))) +
annotate("text", x = 9, y = 1100,
label = paste("SE: ", round(base_c_est$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
ggdid(base_c_est)  +
annotate("text", x = 9, y = 1500,
label = paste("ATT:", round(base_c_est$overall.att, 3))) +
annotate("text", x = 9, y = 1300,
label = paste("SE: ", round(base_c_est$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
# notes: doesn't change if you make it individual as opposed to family weights
print(paste("overall att is",
"and standard errors are", round(base_c_est$overall.se, 3)))
############ husband hours, with controls ##########################
base_h_c <- att_gt(yname = "HOUSEWORK HOURS_husband",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ AGE + `ANNUAL HOURS WORKED` + `LABOR INCOME`,
data = res_clean_wife,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
#clustervars = c("State"),
allow_unbalanced_panel = TRUE)
est_base_h_c <- aggte(base_h_c, type = "dynamic",
na.rm = TRUE, min_e = -5, max_e = 10)
ggdid(est_base_h_c)  +
annotate("text", x = 9, y = 250,
label = paste("ATT:", round(est_base_h_c$overall.att, 3))) +
annotate("text", x = 9, y = 225,
label = paste("SE: ", round(est_base_h_c$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Husband)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL")
############ base specification, high school treatment with controls ###########
res_clean_wife_h <- copy(res_clean_wife)
res_clean_wife_h[hasHighSchool == 0, `Unilateral Divorce Year` := 0]
hs_t <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ `ANNUAL HOURS WORKED` + `LABOR INCOME` + AGE,
data = res_clean_wife_h ,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
#clustervars = c("State"),
allow_unbalanced_panel = TRUE)
est_hs_t <- aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 10)
ggdid(est_hs_t) +
annotate("text", x = 9, y = 550,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 500,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
# notes: doesn't change if you make it individual as opposed to family weights
print(paste("overall att is", round(est_hs_t$overall.att, 3),
"and standard errors are", round(est_hs_t$overall.se, 3)))
hs_t <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ `ANNUAL HOURS WORKED` + `LABOR INCOME` + AGE,
data = res_clean_wife_h ,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
clustervars = c("State"),
allow_unbalanced_panel = TRUE)
############ base specification, high school treatment with controls ###########
res_clean_wife_h <- copy(res_clean_wife)
res_clean_wife_h[hasHighSchool == 0, `Unilateral Divorce Year` := 0]
hs_t <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ `ANNUAL HOURS WORKED` + `LABOR INCOME` + AGE,
data = res_clean_wife_h ,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
clustervars = c("State"),
allow_unbalanced_panel = TRUE)
est_hs_t <- aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 10)
ggdid(est_hs_t) +
annotate("text", x = 9, y = 550,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 500,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
# notes: doesn't change if you make it individual as opposed to family weights
print(paste("overall att is", round(est_hs_t$overall.att, 3),
"and standard errors are", round(est_hs_t$overall.se, 3)))
ggdid(est_hs_t) +
annotate("text", x = 9, y = 1000,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 900,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
hs_t <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ `ANNUAL HOURS WORKED` + `LABOR INCOME` + AGE,
data = res_clean_wife_h ,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
clustervars = c("State"),
anticipation = 3
allow_unbalanced_panel = TRUE)
hs_t <- att_gt(yname = "HOUSEWORK HOURS",
gname = "Unilateral Divorce Year",
idname = "id",
tname = "Year",
xformla = ~ `ANNUAL HOURS WORKED` + `LABOR INCOME` + AGE,
data = res_clean_wife_h ,
est_method = "reg",
weightsname = "FAMILY WEIGHT",
control_group = "notyettreated",
clustervars = c("State"),
anticipation = 3,
allow_unbalanced_panel = TRUE)
est_hs_t <- aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 10)
ggdid(est_hs_t) +
annotate("text", x = 9, y = 1000,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 900,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
ggdid(est_hs_t) +
annotate("text", x = 9, y = 1200,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 1100,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
# notes: doesn't change if you make it individual as opposed to family weights
print(paste("overall att is", round(est_hs_t$overall.att, 3),
"and standard errors are", round(est_hs_t$overall.se, 3)))
est_hs_t <- aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 10)
ggdid(est_hs_t) +
annotate("text", x = 9, y = 1200,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 1100,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
ggdid(est_hs_t) +
annotate("text", x = 9, y = 1000,
label = paste("ATT:", round(est_hs_t$overall.att, 3))) +
annotate("text", x = 9, y = 850,
label = paste("SE: ", round(est_hs_t$overall.se, 3))) +
theme_classic() +
ggtitle("Treatment Effect on Annual Hoursework Hours (Wife)") +
theme(plot.title = element_text(family = 'Georgia', hjust = 0.2, size = 20),
axis.title.x = element_text(family = 'Georgia', size = 16),
axis.text = element_text(family = 'Georgia', size = 10),
axis.title.y = element_text(family = 'Georgia', size = 16),
legend.title = element_text(family = 'Georgia', size = 10),) +
labs(y= "ATT Estimate", x = "Years since Treatment",
subtitle = "Treatment: State of Residence Passed UDL and Wife has HS Degree")
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 10)aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 10)
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = -1)
est_hs_t
est_hs_t
est_hs_t[1:5]
est_hs_t[1:100]
est_hs_t[1:10]
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 0)
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = -1)
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 0)
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = 1, max_e = 5)
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = 1, max_e = 5)$overall.att
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = -5, max_e = 0)$overall.att
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = 1, max_e = 5)$overall.att
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = 6, max_e = 10)$overall.att
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = 6, max_e = 10)$overall.se
aggte(hs_t, type = "dynamic", na.rm = TRUE, min_e = 1, max_e = 5)$overall.se
base_c_est
as.list(c(1, 3), c(3, 5))
